export default {
    namespaced: true,
    state() {
        return {
            productsData: [{
                    sku: 1,
                    product: "Monkey",
                    image: "https://mdbootstrap.com/img/Photos/Horizontal/Interior/img(27).jpg",
                    images: [
                        { image: "https://s3-us-west-2.amazonaws.com/s.cdpn.io/241793/chimpanzee.jpg" },
                        { image: "https://s3-us-west-2.amazonaws.com/s.cdpn.io/241793/gorilla.jpg" },
                        { image: "https://s3-us-west-2.amazonaws.com/s.cdpn.io/241793/red-monkey.jpg" },
                        { image: "https://s3-us-west-2.amazonaws.com/s.cdpn.io/241793/mandrill-monkey.jpg" }
                    ],
                    description: "This is a monkey",
                    details: "This is where some detailes on monkies would go. This monkey done seent some shit.",
                    price: 5.50
                },

                {
                    sku: 2,
                    product: "Kitten",
                    image: "https://mdbootstrap.com/img/Photos/Horizontal/Interior/img(25).jpg",
                    description: "This is a kitten",
                    details: "This is where some detailes on kittens would go. Shout out kittens for being adorable.",
                    price: 10
                },

                {
                    sku: 3,
                    product: "Shark",
                    image: "https://mdbootstrap.com/img/Photos/Horizontal/Interior/img(23).jpg",
                    description: "This is a shark",
                    details: "This is where some detailes on sharks would go. Damn nature, you scary.",
                    price: 15
                },

                {
                    sku: 4,
                    product: "Puppy",
                    image: "https://mdbootstrap.com/img/Photos/Horizontal/Interior/img(19).jpg",
                    description: "This is a puppy",
                    details: "This is where some detailes on puppies would go. Shout out puppies for being adorable.",
                    price: 5
                },

                {
                    sku: 5,
                    product: "Apple",
                    image: "https://mdbootstrap.com/img/Photos/Horizontal/Interior/img(23).jpg",
                    description: "This is an apple",
                    details: "This is where some detailes on apples would go. Shout out apples for being delicious.",
                    price: 1
                },

                {
                    sku: 6,
                    product: "Orange",
                    image: "https://mdbootstrap.com/img/Photos/Horizontal/Interior/img(27).jpg",
                    description: "This is an orange",
                    details: "This is where some detailes on oranges would go. Shout out oranges for being delicious.",
                    price: 1.1
                },

                {
                    sku: 7,
                    product: "Peach",
                    image: "https://mdbootstrap.com/img/Photos/Horizontal/Interior/img(19).jpg",
                    description: "This is a peach",
                    details: "This is where some detailes on peaches would go. Shout out peaches for being delicious.",
                    price: 1.5
                },

                {
                    sku: 8,
                    product: "Mango",
                    image: "https://mdbootstrap.com/img/Photos/Horizontal/Interior/img(25).jpg",
                    description: "This is a mango",
                    details: "This is where some detailes on mangos would go. Shout out mangos for being delicious.",
                    price: 2
                },

                {
                    sku: 9,
                    product: "Cognac",
                    image: "https://mdbootstrap.com/img/Photos/Horizontal/Interior/img(27).jpg",
                    description: "This is a glass of cognac",
                    details: "This is where some detailes on cognac would go. I'm like hey whats up, hello.",
                    price: 17.38
                },

                {
                    sku: 10,
                    product: "Chain",
                    image: "https://mdbootstrap.com/img/Photos/Horizontal/Interior/img(23).jpg",
                    description: "This is a chain",
                    details: "This is where some details on chains would go. 2Chainz but I got me a few on.",
                    price: 17.38
                },
                {
                    sku: 9,
                    product: "Cognac",
                    image: "https://mdbootstrap.com/img/Photos/Horizontal/Interior/img(27).jpg",
                    description: "This is a glass of cognac",
                    details: "This is where some detailes on cognac would go. I'm like hey whats up, hello.",
                    price: 17.38
                },
                {
                    sku: 9,
                    product: "Cognac",
                    image: "https://mdbootstrap.com/img/Photos/Horizontal/Interior/img(27).jpg",
                    description: "This is a glass of cognac",
                    details: "This is where some detailes on cognac would go. I'm like hey whats up, hello.",
                    price: 17.38
                },
                {
                    sku: 9,
                    product: "Cognac",
                    image: "https://mdbootstrap.com/img/Photos/Horizontal/Interior/img(27).jpg",
                    description: "This is a glass of cognac",
                    details: "This is where some detailes on cognac would go. I'm like hey whats up, hello.",
                    price: 17.38
                },
                {
                    sku: 9,
                    product: "Cognac",
                    image: "https://mdbootstrap.com/img/Photos/Horizontal/Interior/img(27).jpg",
                    description: "This is a glass of cognac",
                    details: "This is where some detailes on cognac would go. I'm like hey whats up, hello.",
                    price: 17.38
                },
                {
                    sku: 9,
                    product: "Cognac",
                    image: "https://mdbootstrap.com/img/Photos/Horizontal/Interior/img(27).jpg",
                    description: "This is a glass of cognac",
                    details: "This is where some detailes on cognac would go. I'm like hey whats up, hello.",
                    price: 17.38
                },
                {
                    sku: 9,
                    product: "Cognac",
                    image: "https://mdbootstrap.com/img/Photos/Horizontal/Interior/img(27).jpg",
                    description: "This is a glass of cognac",
                    details: "This is where some detailes on cognac would go. I'm like hey whats up, hello.",
                    price: 17.38
                },
                {
                    sku: 9,
                    product: "Cognac",
                    image: "https://mdbootstrap.com/img/Photos/Horizontal/Interior/img(27).jpg",
                    description: "This is a glass of cognac",
                    details: "This is where some detailes on cognac would go. I'm like hey whats up, hello.",
                    price: 17.38
                },
                {
                    sku: 9,
                    product: "Cognac",
                    image: "https://mdbootstrap.com/img/Photos/Horizontal/Interior/img(27).jpg",
                    description: "This is a glass of cognac",
                    details: "This is where some detailes on cognac would go. I'm like hey whats up, hello.",
                    price: 17.38
                },

            ],
            checkoutBool: false,
            cart: [],
            cartSubTotal: 0,
            tax: 0.065,
            cartTotal: 0,
            showModalPr: false,
            modalData: {},
            currentPage: 1,
            perPage: 3,
            perPageOptions: [3, 6],
        };
    },
    mutations: {
        setPage(state, payload) {
            state.currentPage = payload.n;
        },
        PageNexPre(state, payload) {
            if (payload.direction === "Next") {
                state.currentPage++;
            } else {
                state.currentPage--;
            }
        },
        addToCart: function(state, payload) {
            var found = false;
            const product = payload.product;
            for (var i = 0; i < state.cart.length; i++) {
                if (state.cart[i].sku === product.sku) {

                    state.cart[i].quantity++;
                    //console.log("DUPLICATE",  vue.cart[i].product + "'s quantity is now: " + vue.cart[i].quantity);
                    found = true;
                    break;
                }
            }
            if (!found) {
                product.quantity = 1;
                state.cart.push(product);
            }
            state.cartSubTotal = state.cartSubTotal + product.price;
            state.cartTotal = state.cartSubTotal + (state.tax * state.cartSubTotal);
            state.checkoutBool = true;
        },
        quantityChange: function(state, payload) {
            for (var i = 0; i < state.cart.length; i++) {
                if (state.cart[i].sku === payload.product.sku) {
                    if (payload.direction === "incriment") {
                        state.cart[i].quantity++;
                    } else {
                        state.cart[i].quantity--;
                        if (state.cart[i].quantity == 0) {
                            state.cart.splice(state.cart.indexOf(payload.product), 1);
                        }
                    }
                }
            }
            if (payload.direction === "incriment") {
                state.cartSubTotal = state.cartSubTotal + payload.product.price;
            } else {
                state.cartSubTotal = state.cartSubTotal - payload.product.price;
            }
            state.cartTotal = state.cartSubTotal + (state.tax * state.cartSubTotal);
            if (state.cart.length <= 0) {
                state.checkoutBool = false;
            }
        },
        removeProduct: function(state, payload) {
            const product = payload.product;
            state.cart.splice(state.cart.indexOf(product), 1);
            state.cartSubTotal = state.cartSubTotal - (product.price * product.quantity);
            state.cartTotal = state.cartSubTotal + (state.tax * state.cartSubTotal);
            if (state.cart.length <= 0) {
                state.checkoutBool = false;
            }
        },
        clearCart: function(state) {
            state.cart = [];
            state.cartSubTotal = 0;
            state.cartTotal = 0;
            state.checkoutBool = false;
        },
        viewProduct: function(state, payload) {
            state.modalData = (JSON.parse(JSON.stringify(payload.product)));
            state.showModalPr = true;
        },
        hideModal: function(state) {
            //hide modal and empty modal data
            state.showModalPr = false;
        },

    },
    actions: {
        setPage(context, payload) {
            context.commit('setPage', payload);
        },
        PageNexPre(context, payload) {
            context.commit('PageNexPre', payload);
        },
        addToCart(context, payload) {
            context.commit('addToCart', payload);
        },
        quantityChange(context, payload) {
            context.commit('quantityChange', payload);
        },
        removeProduct(context, payload) {
            context.commit('removeProduct', payload);
        },
        clearCart(context, payload) {
            context.commit('clearCart', payload);
        },
        viewProduct(context, payload) {
            context.commit('viewProduct', payload);
        },
        hideModal(context, payload) {
            context.commit('hideModal', payload);
        },
    },
    getters: {
        numOfPages(state) {
            return Math.ceil(state.productsData.length / state.perPage);
        },
        products(state) {
            let from = ((state.currentPage - 1) * state.perPage);
            if (from > state.productsData.length) {
                state.currentPage = state.numOfPages;
            }
            let to = from + state.perPage;
            return state.productsData.slice(from, to);
        },
        checkoutBool(state) {
            return state.checkoutBool;
        },
        productsData(state) {
            return state.productsData;
        },
        cartTotal(state) {
            return state.cartTotal;
        },
        cart(state) {
            return state.cart;
        },
        cartSubTotal(state) {
            return state.cartSubTotal;
        },
        showModalPr(state) {
            return state.showModalPr;
        },
        modalData(state) {
            return state.modalData;
        },
        currentPage(state) {
            return state.currentPage;
        },
        perPage(state) {
            return state.perPage;
        },
        perPageOptions(state) {
            return state.perPageOptions;
        }
    }
};